# 1c-admission

Тотально не хватило времени. Не успел доработать систему ошибок, и запросы истории других клиентов работают не до конца корректно в связи с тем, что не успел доработать протокол обмена сообщенями (клиент не понимает когда ему нужно перестать читать сообщения от сервера. предпринята попытка перестать читать на специальном символе, однако не хватило времени на дебаг).
В целом остальные части программы работают корректно.

## Устройство сервера

Хранит в себе хранилище Storage, для работы с базой сообщений. Доступ на запись в базу имеет всегда лишь один пользователь, для синхронизации использован мьютекс. По средствам методов LookUp и AddLine происходит взаимодействие с хранилищем. 

Для обработки ошибок я использую шаблонный класс Maybe<T>, который содержит либо код ошибки, либо значение типа T.
  
Клиентская часть должна была быть самой простой, но оказалась самой недоработанной. Из-за того, что я не дооформил протокол общения клиента с сервеом на клиентской части всё ложится (клиент вечно ждет историю сообщений, и ни на что не реагирует).

## Использование

При запуске сервера вводится номер порта, а клиент получает порт из аргументов командной строки. Клиент начинает сообщение с '+' если хочет добавить запись в базу, и с '?' если хочет получить историю. Опционально после знака вопроса указывается номер клиента, историю которого мы хотим запросить.

## Сборка

```
mkdir build
cd build
cmake ..
make
```
